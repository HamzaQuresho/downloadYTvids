import yt_dlp
import os

# Clean URLs
video_urls = [
    "https://www.youtube.com/watch?v=1xjcpmApUyU",
    "https://www.youtube.com/watch?v=IKs652oBiDo",
    "https://www.youtube.com/watch?v=W6mgZankP7I",
    "https://www.youtube.com/watch?v=wT5h2bQXzhI",
    "https://www.youtube.com/watch?v=KlwwE0U7eg4",
    "https://www.youtube.com/watch?v=ocZ46qol4oA",
    "https://www.youtube.com/watch?v=lb9QYcnJwWw",
    "https://www.youtube.com/watch?v=7UBhIadhrTo",
    "https://www.youtube.com/watch?v=7UBhIadhrTo",
    "https://www.youtube.com/watch?v=faOzlIjFRIA",
    "https://www.youtube.com/watch?v=_TS92TEds3Q",
    "https://www.youtube.com/watch?v=WsXt15eru5c",
    "https://www.youtube.com/watch?v=hZmQjoFiHEM",
    "https://www.youtube.com/watch?v=-qrtYZRofzk",
    "https://www.youtube.com/watch?v=RvwSUHx4mn4",
    "https://www.youtube.com/watch?v=qHJeL1Vfd4w",
    "https://www.youtube.com/watch?v=UdA3OTypFp0",
    "https://www.youtube.com/watch?v=53OI9EZBGIM",
    "https://www.youtube.com/watch?v=dM4Yuq5-PGU",
    "https://www.youtube.com/watch?v=wV4bbDoFLcA",
    "https://www.youtube.com/watch?v=N6BPC2_yptk",
    "https://www.youtube.com/watch?v=cHPl_7FpPRU",
    "https://www.youtube.com/watch?v=o_Q4b_uWMd4",
    "https://www.youtube.com/watch?v=7KT28Ux_Op0",
    "https://www.youtube.com/watch?v=vKtu1VarEDA",
    "https://www.youtube.com/watch?v=Kzwy6sFRhEQ",
    "https://www.youtube.com/watch?v=fRguj6resZg",
    "https://www.youtube.com/watch?v=6sDdrZDvj_Q",
    "https://www.youtube.com/watch?v=E2HKpgXj9V4",
    "https://www.youtube.com/watch?v=mc1xggktlro",
    "https://www.youtube.com/watch?v=WDBzeLjkcfs",
    "https://www.youtube.com/watch?v=Rt68_xr4B9Y",
    "https://www.youtube.com/watch?v=zfOK_yUylwQ",
    "https://www.youtube.com/watch?v=pqMSl7K_2vU",
]

# Remove any accidental whitespace
video_urls = [url.strip() for url in video_urls]

# Save in the same folder as this script
output_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), '%(title).50s.%(ext)s')

ydl_opts = {
    'format': 'bestaudio[ext=m4a]/bestaudio/best',
    'outtmpl': output_path,
    'restrictfilenames': True,
    'ignoreerrors': True,
    'no_warnings': False,
    'sleep_interval': 2,
    'max_sleep_interval': 5,

    # Explicitly avoid any custom language — let YouTube use default
    # DO NOT include 'lang' at all if not needed

    'extractor_args': {
        'youtube': {
            'player_client': ['android'],  # Less likely to be blocked
        }
    },

    'http_headers': {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36',
        'Accept-Language': 'en-US,en;q=0.9',
    },

    'postprocessors': [{
        'key': 'FFmpegExtractAudio',
        'preferredcodec': 'mp3',
        'preferredquality': '192',
    }],
    'keepvideo': False,
}

print("Starting download...")
with yt_dlp.YoutubeDL(ydl_opts) as ydl:
    ydl.download(video_urls)

print(f"\n✅ Done! MP3s saved in: {os.path.dirname(os.path.abspath(__file__))}")
